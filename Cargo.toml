[package]
name = "jetstream"
version = "9.1.0"
edition = "2021"
description = "Jetstream is a RPC framework for Rust, based on the 9P protocol and QUIC."
license = "BSD-3-Clause"
repository = "https://github.com/sevki/jetstream"
documentation = "https://sevki.github.io/jetstream/"

[workspace.package]
edition = "2021"
description = "Jetstream is a RPC framework for Rust, based on the 9P protocol and QUIC."
license = "BSD-3-Clause"
repository = "https://github.com/sevki/jetstream"
documentation = "https://sevki.github.io/jetstream/"
readme = "README.md"


[workspace.dependencies]

[dependencies]
jetstream_macros = { version = "9.1.0", path = "components/jetstream_macros" }
jetstream_wireformat = { version = "9.1.0", path = "components/jetstream_wireformat" }
jetstream_rpc = { version = "9.1.0", path = "components/jetstream_rpc" }
jetstream_9p = { version = "9.1.0", path = "components/jetstream_9p", optional = true }
jetstream_quic = { version = "9.1.0", path = "components/jetstream_quic", optional = true }
jetstream_websocket = { version = "9.1.0", path = "components/jetstream_websocket", optional = true }
jetstream_iroh = { version = "9.1.0", path = "components/jetstream_iroh", optional = true }
trait-variant = "0.1.2"
async-trait = "0.1.89"
tokio-util = { version = "0.7.16", features = ["codec"] }
futures = "0.3.31"
lazy_static = "1.5.0"

[dev-dependencies]
arbitrary = "1.4.1"
criterion = { version = "0.6.0", features = ["async_tokio"] }
futures-util = "0.3.30"
jetstream_9p = { version = "9.1.0", path = "components/jetstream_9p" }
jetstream_macros = { version = "9.1.0", path = "components/jetstream_macros" }
jetstream_rpc = { version = "9.1.0", path = "components/jetstream_rpc" }
jetstream_wireformat = { version = "9.1.0", path = "components/jetstream_wireformat", features = ["all"]}

okstd = { version = "1.0.2", features = ["macros"] }
s2n-quic = "1.59.0"
tmpdir = "1.0.0"
tokio = { version = "1.47.1", features = ["full"] }
turmoil = "0.6.5"


[workspace]

members = [
    "components/jetstream_9p",
    "components/jetstream_libc",
    "components/jetstream_macros",
    "components/jetstream_rpc",
    "components/jetstream_ufs",
    "components/jetstream_wireformat",
    "components/rustdoc_to_mdbook",
    "components/jetstream_websocket",
    "components/jetstream_quic",
    "components/jetstream_iroh",
    "fuzz",
]


[lib]
bench = false
crate-type = ["cdylib", "rlib"]

[[test]]
name = "jetstream_wire_format"
path = "tests/jetstream_wire_format/mod.rs"
bench = false
[[test]]
name = "server"
bench = false

[[bench]]
name = "performance_tests"
harness = false

[[example]]
name = "echo"
bench = false

[[example]]
name = "iroh_echo"
bench = false
required-features = ["iroh"]


[features]
default = ["iroh"]
all = [ "9p", "iroh"]
9p = ["dep:jetstream_9p"]
websocket = ["dep:jetstream_websocket"]
quic = ["dep:jetstream_quic"]
wasm = ["jetstream_wireformat/tokio"]
tokio = ["jetstream_wireformat/tokio"]
iroh = ["dep:jetstream_iroh"]
