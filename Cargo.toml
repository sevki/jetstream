[package]
name = "jetstream"
version = "6.4.2"
edition = "2021"
description = "Jetstream is a RPC framework for Rust, based on the 9P protocol and QUIC."
license = "BSD-3-Clause"
repository = "https://github.com/sevki/jetstream"

build = "build.rs"

[workspace.package]
edition = "2021"
description = "Jetstream is a RPC framework for Rust, based on the 9P protocol and QUIC."
license = "BSD-3-Clause"
repository = "https://github.com/sevki/jetstream"

[dependencies]
jetstream_client = { version = "6.4.1", path = "components/jetstream_client", optional = true }
jetstream_macros = { version = "6.4.1", path = "components/jetstream_macros" }
jetstream_server = { version = "6.4.1", path = "components/jetstream_server", optional = true }
jetstream_ufs = { version = "6.4.1", path = "components/jetstream_ufs", optional = true }
jetstream_wireformat = { version = "6.4.1", path = "components/jetstream_wireformat" }
jetstream_rpc = { version = "6.4.1", path = "components/jetstream_rpc" }
jetstream_9p = { version = "6.4.1", path = "components/jetstream_9p", optional = true }
trait-variant = "0.1.2"
jetstream_cluster = { version = "6.4.1", path = "components/jetstream_cluster", optional = true }


[build-dependencies]
anyhow = "1.0.93"
glob = "0.3.1"
pkg-config = "0.3"
which = "6.0.1"
indexed_docs = { git = "https://github.com/zed-industries/zed.git", version = "0.1.0", optional = true }
html_to_markdown = { git = "https://github.com/zed-industries/zed.git", version = "0.1.0", optional = true }
comrak = { version = "0.29.0", optional = true }

[dev-dependencies]
arbitrary = "1.4.1"
criterion = { version = "0.5.1", features = ["async_tokio"] }
futures-util = "0.3.30"

jetstream_9p = { version = "6.4.1", path = "components/jetstream_9p" }
jetstream_client = { version = "6.4.1", path = "components/jetstream_client" }
jetstream_macros = { version = "6.4.1", path = "components/jetstream_macros" }
jetstream_rpc = { version = "6.4.1", path = "components/jetstream_rpc" }
jetstream_server = { version = "6.4.1", path = "components/jetstream_server" }
jetstream_wireformat = { version = "6.4.1", path = "components/jetstream_wireformat" }
okstd = { version = "0.1.10", features = ["macros"] }
prost = "0.13.3"
s2n-quic = "1.47.0"
tmpdir = "1.0.0"
tokio = { version = "1.40.0", features = ["full"] }


[workspace]

members = [
    "components/jetstream_9p",
    "components/jetstream_client",
    "components/jetstream_cluster",
    "components/jetstream_macros",
    "components/jetstream_rpc",
    "components/jetstream_server",
    "components/jetstream_ufs",
    "components/jetstream_wireformat",
    "jetstream_fuzz",
]
[lib]
bench = false

[[test]]
name = "wire_format"
bench = false
[[test]]
name = "server"
bench = false

[[bench]]
name = "performance_tests"
harness = false

[[example]]
name = "echo"
bench = false


[features]
default = []
client = ["dep:jetstream_client"]
ufs = ["dep:jetstream_ufs"]
server = ["dep:jetstream_server"]
all = ["client", "ufs", "server", "9p"]
9p = ["dep:jetstream_9p"]
cluster = ["dep:jetstream_cluster"]
docs = ["dep:indexed_docs", "dep:html_to_markdown"]
